# Руководство Пользователя QuizBattle

## Для кого сервис

- Школьники и студенты 14-22 лет.
- Организаторы хакатонов и мероприятий.
- Учителя для проведения квизов в классе.
- Компании для тимбилдинга.

## Как запустить игру

1. Открой сайт на главной странице.
2. В режиме `Ведущий` заполни параметры:
   - имя,
   - тема,
   - целевая аудитория,
   - стиль раундов,
   - число вопросов и таймер,
   - формат игры (`Команды` или `FFA`),
   - сложность (`смешанная / легкая / средняя / сложная`),
   - бонус за скорость (по желанию),
   - пароль комнаты (по желанию).
3. Нажми `Создать матч`.
4. Поделись `PIN` или кнопкой `Скопировать ссылку-приглашение`.
5. Нажми `Запустить игру`.

## Как найти комнату через каталог

1. Открой вкладку `Комнаты`.
2. В поле поиска введи тему, PIN или имя ведущего.
3. Выбери нужное лобби и нажми `Войти в лобби`.
4. Если у комнаты есть пароль, введи его в блоке быстрого входа и повтори вход.

## Как подключиться игроку

1. Переключись в режим `Игрок`.
2. Введи `PIN` комнаты и имя.
3. Если комната защищена, введи пароль.
4. Нажми `Войти в комнату`.

## Игровой процесс

- В режиме `Команды`: ходы идут поочередно `A -> B`.
- В режиме `FFA`: отвечает только активный игрок.
- В режиме `Дуэль 1 на 1`: в комнате только 2 игрока, по одному в каждой команде.
- Базово за правильный ответ: `1` балл.
- Если включен speed bonus: за быстрый правильный ответ можно получить `+1` или `+2`.
- Во время раунда может показываться тематическая иллюстрация к вопросу.
- Ведущий может поставить игру на паузу.
- Ведущий может пропустить вопрос или переключиться на следующий вопрос.
- Ведущий может дисквалифицировать участника.
- Если время истекает, вопрос засчитывается как проигранный.

## Что видно после матча

- Финальный счет.
- Лента ключевых событий.
- Разбор последнего вопроса.
- Список сложных вопросов по статистике ошибок и таймаутов.
- Персональная статистика игроков (очки, точность, ответы).
- Кнопка ведущего для экспорта результатов в JSON-файл.
- Кнопка `Поделиться итогом` (системный share-sheet или копирование текста результата).
- В `FFA` выводится итоговый персональный рейтинг.

## Профили и рейтинг

- Вкладка `Аккаунт`: регистрация, вход и редактирование профиля.
- Вкладка `Друзья`: поиск игроков, заявки, инвайты, сообщения.
- Вкладка `Лидерборд`: рейтинг пользователей.
- Вкладка `История`: завершенные матчи и детальные карточки игр.
- После входа показывается:
  - персональный профиль,
  - рейтинг игроков,
  - история матчей,
  - личная статистика по сыгранным играм.

## Дополнительно

- Переключатель светлой/тёмной темы.
- Звуковые сигналы раунда, ответа и финального таймера (можно отключить).
- Автовосстановление подключения к комнате после краткого обрыва связи.
- Если игрок временно пропал из сети во время матча, у него есть окно возврата (до 60 секунд).
- Если у ведущего оборвалась связь, игра ставится на паузу и ждёт его возвращения (до 90 секунд).

## Как работает AI в продукте

- Пользователь не выбирает AI-режим вручную: качество и провайдеры управляются сервером.
- При наличии `GEMINI_API_KEY` используется серверная генерация высокого качества.
- Если внешний AI недоступен, сервер использует локальный fallback, чтобы матч всегда запускался.
